require 'nokogiri'

file = <<EOF
<g>
  <clipPath id="clip-path-kennel">
    <path transform="matrix(0.1,0,0,-0.1,0,0)"
    d="M21298 -12577 l-258 -258 -52 -155 -53 -155 -345 -246 -345 -246 -46
    -84 c-26 -46 -77 -142 -114 -212 -56 -107 -72 -131 -101 -144 l-34 -17 0
    -1265 c0 -696 -4 -1271 -8 -1278 -4 -6 -20 -16 -35 -22 -26 -10 -37 -36 -17
    -43 6 -2 15 -64 20 -138 6 -74 14 -138 18 -141 4 -4 225 -111 492 -239 267
    -128 489 -235 493 -239 5 -6 104 -558 107 -598 0 -2 100 -70 223 -152 213
    -143 229 -156 390 -319 l169 -170 186 -6 c103 -4 256 -10 341 -14 l154 -7 104
    -170 c56 -93 109 -174 115 -181 7 -6 199 -86 426 -178 l413 -166 302 -192
    c223 -141 343 -225 460 -320 l157 -129 470 10 c258 6 483 11 500 11 28 0 40
    15 191 243 156 234 167 247 330 412 l169 170 50 554 c27 305 51 556 53 557 1
    2 262 -46 580 -107 l577 -109 350 122 350 123 0 628 0 628 -159 188 -160 189
    -228 6 c-125 4 -325 10 -443 14 l-214 7 -443 519 c-243 286 -451 528 -461 539
    -15 14 -82 29 -303 68 -156 27 -285 49 -286 49 -2 0 -75 108 -162 239 l-160
    239 -30 288 c-20 184 -35 292 -43 300 -7 6 -160 107 -340 223 l-327 211 -388
    -30 c-306 -23 -390 -27 -399 -17 -6 6 -152 228 -324 492 -299 458 -318 490
    -430 725 l-117 245 -554 3 -554 2 -257 -257z"/>
  </clipPath>
  <clipPath id="clip-path-cave-mouth">
    <path transform="matrix(0.1,0,0,-0.1,0,0)"
    d="M16929 -17107 c-12 -27 -41 -98 -66 -160 -27 -68 -82 -173 -142 -270
    l-98 -158 -59 -6 c-32 -4 -222 -15 -421 -25 l-362 -18 -208 47 -208 46 -420
    26 c-231 14 -441 25 -467 25 -35 0 -100 -21 -260 -85 l-213 -85 -126 -130
    -125 -130 -338 30 -338 31 -76 53 c-61 42 -117 69 -270 125 -106 39 -204 71
    -218 71 -14 0 -191 -23 -392 -51 l-367 -50 -360 -116 c-198 -63 -367 -119
    -375 -123 -8 -5 -102 -166 -208 -358 l-193 -350 -135 -118 -134 -119 -128 -45
    -127 -45 -160 -198 -159 -197 -188 0 -188 0 -123 61 -122 62 -165 -32 c-91
    -17 -203 -37 -250 -44 l-85 -12 -3 -4425 c-1 -2434 0 -4440 3 -4457 l6 -33
    4118 0 c2265 0 4132 3 4149 6 44 9 142 99 142 130 0 14 11 35 23 47 13 12 34
    49 46 82 12 33 26 64 30 70 5 5 11 30 15 55 7 45 30 119 47 152 5 9 12 35 15
    58 4 22 11 43 15 46 5 3 9 20 9 39 0 19 5 46 12 62 7 15 17 78 24 138 14 131
    31 209 44 213 6 2 10 26 10 53 0 28 16 115 35 193 19 79 35 159 35 177 0 19 5
    52 11 74 20 78 29 121 35 160 3 22 11 65 19 95 19 77 34 161 46 255 5 44 13
    89 18 100 24 56 49 337 50 576 1 102 5 199 11 215 5 16 14 81 19 144 5 63 18
    171 29 240 12 69 26 159 32 200 6 41 20 113 32 160 11 47 24 114 29 150 4 36
    15 116 23 178 8 62 18 116 21 121 3 5 11 67 19 138 8 70 23 162 34 203 11 41
    25 113 32 160 7 47 19 94 26 105 6 11 15 45 19 75 4 30 12 64 18 75 6 11 14
    38 18 60 22 116 32 151 45 166 8 8 14 22 14 31 0 8 3 17 6 21 4 3 17 39 31 79
    13 40 28 77 33 81 4 5 6 45 3 89 -4 51 0 112 10 171 9 51 21 137 27 192 30
    264 40 325 63 390 14 39 32 106 41 150 23 114 26 128 36 150 5 11 13 40 18 65
    13 59 28 101 63 178 16 34 29 69 29 78 0 25 47 108 69 122 12 7 21 20 21 29 0
    9 13 31 28 48 16 16 50 66 77 110 27 44 66 99 87 122 21 24 38 47 38 53 0 6
    24 36 53 68 29 31 62 71 74 88 12 16 49 50 81 74 60 43 172 180 186 228 4 12
    12 22 17 22 5 0 25 25 44 55 20 30 70 101 113 157 218 291 226 303 273 463
    118 404 144 489 180 584 21 57 39 115 39 130 0 14 15 115 34 224 l34 198 -176
    372 c-144 303 -191 413 -252 592 l-75 220 -108 80 c-77 57 -129 88 -185 108
    -133 49 -142 53 -159 78 -9 13 -27 33 -39 44 -49 46 -62 58 -119 124 l-60 69
    -858 1 -858 1 -20 -47z"/>
  </clipPath>
  <clipPath id="clip-path-compass">
    <path transform="matrix(0.1,0,0,-0.1,0,0)"
    d="M38459 -2426 c-15 -19 -4 -31 34 -38 19 -3 45 -18 58 -32 l24 -26 -3
    -256 c-1 -142 -6 -270 -10 -287 -7 -24 -15 -31 -43 -35 -25 -4 -34 -10 -34
    -24 0 -18 8 -20 120 -20 112 0 120 2 120 20 0 14 -9 20 -35 24 -25 4 -38 12
    -48 32 -18 38 -31 513 -14 507 7 -2 47 -50 89 -105 61 -79 276 -336 344 -411
    100 -110 103 -109 106 23 4 184 25 549 34 572 6 15 17 22 34 22 21 0 26 4 23
    21 -3 20 -9 21 -118 21 -109 0 -115 -1 -118 -21 -3 -16 2 -21 20 -21 38 0 66
    -11 73 -28 13 -35 22 -438 10 -450 -4 -4 -15 4 -24 18 -17 27 -211 272 -220
    280 -4 3 -46 53 -94 112 l-87 107 -63 -5 c-34 -4 -86 -2 -114 4 -41 7 -55 6
    -64 -4z m671 -639 c0 -8 -4 -15 -9 -15 -13 0 -22 16 -14 24 11 11 23 6 23 -9z"/>
    <path transform="matrix(0.1,0,0,-0.1,0,0)"
    d="M38850 -3254 c0 -59 -24 -209 -40 -251 l-10 -27 -31 26 c-35 30 -65
    33 -97 10 -34 -24 -45 -50 -31 -76 23 -43 64 -51 94 -18 17 19 17 21 1 39 -21
    23 -50 16 -43 -10 6 -23 -18 -26 -27 -3 -15 38 36 75 73 53 28 -18 39 -49 29
    -86 -11 -42 -47 -69 -127 -93 -153 -48 -295 -142 -386 -258 -58 -72 -120 -194
    -136 -267 -13 -60 -41 -92 -106 -123 -45 -21 -86 -4 -81 35 2 14 9 28 16 31 9
    3 11 -3 6 -22 -5 -22 -3 -26 14 -26 39 0 39 63 0 76 -45 14 -77 -59 -41 -98 9
    -10 14 -21 10 -24 -9 -9 -75 -22 -153 -29 -41 -4 -72 -11 -69 -15 3 -4 49 -11
    103 -15 119 -8 131 -14 108 -46 -21 -31 -20 -62 3 -83 35 -32 89 3 65 42 -18
    27 -39 21 -37 -10 2 -32 -12 -37 -26 -10 -7 14 -6 25 5 40 22 32 65 28 116
    -11 37 -29 45 -41 61 -102 36 -142 114 -273 216 -368 105 -96 196 -147 331
    -183 36 -10 75 -26 87 -37 31 -28 62 -94 56 -118 -8 -29 -48 -46 -68 -29 -23
    19 -18 31 13 28 31 -3 37 18 10 36 -22 13 -51 -2 -56 -28 -9 -43 60 -73 92
    -41 8 8 19 15 24 15 11 0 32 -104 33 -161 0 -19 4 -43 8 -54 7 -16 10 -9 15
    30 15 114 25 178 30 183 3 3 14 -2 24 -11 22 -20 63 -22 80 -5 7 7 12 24 12
    39 0 34 -34 49 -57 26 -19 -19 -7 -40 18 -32 22 7 25 -7 5 -24 -29 -25 -73 20
    -60 62 4 12 20 41 37 64 25 36 39 45 100 63 149 45 288 139 383 258 52 65 119
    199 134 270 6 26 12 57 15 68 6 27 93 84 127 84 14 0 31 -7 38 -14 15 -19 9
    -58 -9 -64 -10 -3 -12 2 -7 21 8 32 -10 45 -32 24 -23 -23 -1 -70 30 -65 32 4
    57 52 40 75 -37 53 -29 59 93 68 50 3 97 10 103 14 7 4 -36 13 -95 20 -60 7
    -112 16 -117 21 -6 6 -3 17 7 28 22 24 22 54 -1 82 -13 17 -24 21 -40 16 -25
    -8 -40 -52 -24 -68 17 -17 44 -1 37 22 -3 11 -2 20 4 20 33 0 22 -67 -13 -76
    -48 -12 -144 61 -152 116 -7 44 -53 153 -89 211 -92 146 -238 261 -409 320
    -76 26 -121 62 -132 103 -9 35 9 73 41 88 21 9 28 8 45 -7 22 -20 23 -56 3
    -63 -8 -2 -13 5 -13 18 0 16 -5 21 -22 18 -48 -7 -28 -68 22 -68 59 0 81 72
    33 110 -34 26 -84 22 -118 -10 -13 -12 -26 -17 -29 -12 -6 11 -31 167 -41 260
    -8 76 -25 82 -25 8z m-119 -547 c47 -18 74 -66 74 -136 0 -55 -3 -65 -30 -93
    -16 -18 -52 -43 -80 -57 -27 -14 -58 -32 -68 -41 -16 -14 -21 -13 -57 23 -22
    22 -40 47 -40 56 0 17 -65 47 -76 36 -12 -12 25 -75 48 -80 13 -4 37 -20 53
    -37 29 -30 29 -31 12 -58 -10 -15 -33 -57 -52 -94 -19 -37 -44 -72 -54 -78
    -35 -18 -86 -12 -111 15 l-23 24 -29 -24 c-20 -17 -42 -25 -66 -25 -63 0 -66
    7 -48 94 16 79 77 226 94 226 5 0 12 -29 15 -65 7 -70 36 -138 66 -155 36 -19
    78 -12 100 16 27 34 26 54 0 88 -16 21 -28 26 -53 24 -29 -3 -31 -5 -31 -43 0
    -33 3 -40 20 -40 14 0 20 7 20 22 0 31 12 38 25 14 13 -26 -1 -57 -31 -66 -16
    -5 -29 0 -48 19 -24 25 -26 33 -26 115 0 84 2 91 31 127 54 67 77 79 162 82
    90 4 145 -17 150 -56 7 -46 -49 -71 -79 -36 -12 14 -10 16 16 12 25 -2 31 1
    33 19 3 17 -3 24 -24 29 -56 14 -84 -39 -43 -82 31 -34 81 -33 108 2 26 34 26
    54 0 88 -31 39 -76 59 -148 65 -36 3 -66 11 -68 17 -5 14 79 52 137 63 47 9
    77 6 121 -10z m458 -25 c28 -15 51 -31 51 -35 0 -5 -17 -9 -38 -9 -95 0 -202
    -59 -202 -112 0 -68 87 -96 129 -41 19 23 20 29 8 47 -17 26 -59 32 -76 12
    -19 -23 -4 -38 32 -31 l32 7 -26 -27 c-24 -24 -29 -25 -48 -13 -49 30 -29 89
    36 107 88 25 176 9 230 -42 48 -45 63 -85 63 -166 0 -64 -3 -74 -29 -103 -26
    -29 -31 -31 -55 -20 -20 9 -26 19 -26 42 0 18 6 33 15 37 22 8 30 -3 16 -20
    -9 -11 -8 -17 3 -27 22 -17 36 -4 36 35 0 29 -4 36 -27 41 -21 6 -31 2 -50
    -20 -54 -63 0 -138 78 -106 37 16 69 83 73 151 1 29 7 54 13 56 15 5 79 -149
    94 -225 14 -74 9 -82 -53 -82 -24 0 -46 8 -66 25 l-29 24 -23 -24 c-49 -52
    -106 -26 -138 63 -12 32 -31 67 -42 77 -11 10 -20 23 -20 29 0 17 63 76 81 76
    9 0 21 6 27 13 11 13 27 77 19 77 -19 0 -77 -33 -77 -44 0 -8 -17 -32 -37 -54
    l-38 -40 -25 20 c-14 11 -50 33 -82 49 -75 38 -98 71 -98 143 0 50 4 60 36 95
    19 22 45 42 57 45 45 9 126 -5 176 -30z m-378 -329 c10 -22 19 -52 19 -67 0
    -27 -28 -98 -40 -98 -3 0 -39 34 -80 75 -48 48 -71 78 -65 84 6 6 35 23 65 40
    62 34 72 31 101 -34z m186 44 c31 -11 93 -51 93 -59 0 -9 -141 -150 -149 -150
    -18 0 -33 62 -29 113 4 49 30 107 48 107 5 0 21 -5 37 -11z m-246 -242 c-17
    -17 -141 -20 -170 -5 -43 23 -48 42 -22 90 48 87 45 87 129 2 57 -57 72 -78
    63 -87z m408 92 c18 -33 30 -67 27 -75 -8 -20 -84 -54 -123 -54 -40 0 -82 16
    -89 33 -5 15 122 153 142 156 6 0 26 -26 43 -60z m-886 -191 c12 -6 27 -18 34
    -27 10 -14 13 -14 32 3 11 10 41 21 65 23 62 7 88 -11 105 -75 7 -28 26 -71
    42 -97 16 -25 29 -49 29 -52 0 -15 -65 -73 -82 -73 -12 0 -24 -13 -34 -35 -21
    -51 -18 -55 26 -37 22 9 40 24 40 32 0 9 18 33 39 54 l39 38 31 -21 c17 -12
    60 -35 96 -52 45 -20 69 -38 80 -58 21 -41 19 -55 -12 -92 -19 -22 -24 -34
    -15 -37 24 -8 44 -62 37 -103 -4 -21 -10 -41 -13 -43 -21 -12 -192 34 -284 77
    -62 29 -62 47 -2 47 142 0 231 94 158 166 -30 31 -67 27 -101 -11 -35 -39 -4
    -96 44 -78 40 14 38 43 -3 43 -29 0 -31 15 -4 30 14 8 25 7 40 -2 33 -21 35
    -47 6 -77 -23 -23 -36 -26 -104 -29 -95 -4 -151 20 -196 86 -56 79 -44 225 21
    255 43 19 84 -43 48 -73 -8 -7 -15 -9 -16 -4 -1 5 -2 18 -3 29 -2 33 -40 26
    -44 -8 -7 -58 50 -78 87 -31 34 43 26 86 -20 109 -33 18 -63 9 -97 -27 -28
    -31 -42 -78 -42 -145 0 -75 -22 -70 -60 14 -33 73 -55 150 -66 230 -6 48 -5
    52 17 56 44 8 60 7 82 -5z m1256 -4 c2 -2 -1 -39 -7 -81 -12 -77 -77 -243 -98
    -250 -7 -2 -13 19 -17 56 -10 110 -71 182 -135 160 -43 -15 -59 -57 -38 -98
    31 -60 113 -45 97 17 -10 38 -47 38 -43 0 3 -35 -15 -36 -30 -3 -9 21 -8 28 7
    45 44 49 95 3 102 -94 9 -110 -43 -203 -125 -226 -103 -28 -222 0 -222 53 0
    35 33 62 59 47 30 -16 27 -38 -4 -32 -36 6 -36 -33 0 -42 34 -9 65 9 65 37 0
    79 -137 92 -141 14 -4 -77 62 -127 170 -127 28 0 41 -4 41 -14 0 -30 -252
    -119 -294 -103 -28 11 -22 92 9 123 l26 25 -27 32 c-21 24 -25 38 -20 65 7 46
    17 56 85 81 32 12 75 33 96 46 l37 26 34 -38 c18 -21 33 -44 34 -50 0 -16 62
    -43 73 -33 14 12 -20 80 -40 80 -9 0 -32 14 -50 31 l-32 32 28 41 c28 40 61
    122 61 151 0 37 83 47 124 14 l26 -21 32 27 c27 23 38 26 72 21 22 -4 42 -9
    45 -12z m-804 -6 c14 -6 25 -17 25 -23 0 -20 -139 -157 -151 -149 -13 7 -59
    108 -59 127 0 7 17 23 38 35 41 24 106 29 147 10z m426 -19 c42 -22 44 -37 13
    -96 -15 -30 -35 -58 -42 -61 -15 -5 -152 125 -152 145 0 29 132 38 181 12z
    m-351 -58 c18 -34 12 -132 -10 -168 -11 -18 -26 -33 -34 -33 -21 0 -107 51
    -113 67 -6 15 113 150 134 152 7 0 17 -8 23 -18z m218 -56 c41 -41 71 -79 67
    -85 -11 -18 -106 -61 -128 -58 -48 7 -77 145 -41 196 8 12 18 22 22 22 4 0 40
    -34 80 -75z"/>
    <path transform="matrix(0.1,0,0,-0.1,0,0)"
    d="M37180 -4249 c0 -5 8 -11 18 -13 22 -6 30 -23 93 -201 29 -81 57
    -146 62 -144 6 2 19 28 29 58 10 30 25 68 33 85 8 17 16 40 18 50 9 48 20 75
    29 72 5 -2 29 -62 54 -132 24 -71 46 -131 49 -134 8 -8 10 -3 38 78 75 213 93
    255 115 266 32 16 17 24 -45 24 -53 0 -71 -13 -32 -23 12 -3 20 -12 17 -19 -3
    -7 -18 -59 -34 -115 -16 -57 -33 -103 -39 -103 -5 0 -25 46 -44 103 -18 56
    -36 108 -38 115 -3 8 4 16 16 19 43 11 19 23 -49 23 -67 0 -93 -12 -50 -23 13
    -3 20 -14 20 -29 0 -30 -59 -208 -69 -208 -8 0 -32 62 -66 170 -15 49 -15 55
    -1 66 28 20 18 24 -54 24 -38 0 -70 -4 -70 -9z"/>
    <path transform="matrix(0.1,0,0,-0.1,0,0)"
    d="M40020 -4259 c0 -5 10 -11 23 -13 22 -3 22 -5 22 -158 0 -154 0 -155
    -23 -158 -13 -2 -22 -8 -20 -13 2 -6 52 -10 113 -10 196 -1 183 -4 200 37 27
    66 12 73 -39 19 -30 -32 -39 -35 -88 -35 -30 0 -59 5 -66 12 -14 14 -16 134
    -3 142 20 13 73 -7 82 -31 14 -38 29 -17 29 42 0 59 -15 80 -29 42 -9 -24 -62
    -44 -82 -31 -5 3 -9 36 -9 75 l0 69 46 0 c53 0 78 -12 112 -52 32 -38 46 -24
    29 28 l-14 39 -141 3 c-86 1 -142 -1 -142 -7z"/>
    <path transform="matrix(0.1,0,0,-0.1,0,0)"
    d="M38813 -5669 c-34 -16 -44 -27 -54 -59 -17 -60 13 -117 85 -160 66
    -41 84 -60 92 -98 4 -21 0 -37 -14 -54 -16 -20 -27 -23 -68 -21 -52 2 -81 20
    -87 55 -3 20 -4 20 -14 -4 -5 -14 -13 -38 -17 -53 l-7 -28 93 5 c51 2 105 9
    120 16 36 17 62 72 54 115 -7 35 -61 92 -115 119 -93 49 -94 161 -2 161 46 0
    81 -27 81 -62 0 -20 19 -35 21 -15 0 4 2 26 4 48 l5 41 -53 7 c-73 8 -77 8
    -124 -13z"/>
  </clipPath>
  <clipPath id="clip-path-entrance">
    <path transform="matrix(0.1,0,0,-0.1,0,0)"
    d="M16590 -12808 c12 -21 52 -80 90 -132 154 -211 166 -233 215 -381 l46
    -141 -16 -141 c-9 -78 -25 -206 -35 -284 -20 -141 -20 -143 -75 -232 -52 -86
    -56 -98 -84 -243 -16 -84 -41 -236 -56 -338 -16 -111 -37 -213 -52 -255 -58
    -162 -57 -131 -14 -414 55 -354 52 -344 133 -472 38 -62 73 -122 78 -135 6
    -14 -2 -108 -21 -266 -28 -222 -30 -264 -27 -488 l4 -245 38 -145 c21 -80 41
    -148 45 -152 4 -4 26 42 51 102 l44 110 858 0 c646 0 858 -3 858 -12 0 -6 27
    -39 60 -74 33 -34 60 -66 60 -72 0 -5 11 -14 25 -20 14 -6 37 -29 52 -51 24
    -33 53 -53 85 -55 6 -1 83 102 246 327 30 42 155 142 328 264 22 16 80 32 190
    53 188 37 220 46 228 66 3 9 6 587 6 1285 0 1104 -2 1279 -15 1337 -25 106
    -49 140 -130 182 -42 21 -75 45 -82 60 -8 15 -13 66 -13 128 0 97 2 109 45
    225 25 67 55 136 67 152 12 17 100 135 195 263 l173 232 -1811 0 -1810 0 21
    -38z"/>
  </clipPath>
  <clipPath id="clip-path-goblin-blind">
    <path transform="matrix(0.1,0,0,-0.1,0,0)"
    d="M19801 -18962 c-17 -106 -31 -203 -31 -214 0 -12 -18 -68 -39 -125
    -36 -95 -62 -180 -180 -584 -47 -160 -55 -172 -273 -463 -43 -56 -93 -127
    -113 -157 -19 -30 -39 -55 -44 -55 -5 0 -13 -10 -17 -22 -14 -48 -126 -185
    -186 -228 -32 -24 -69 -58 -81 -74 -12 -17 -45 -57 -74 -88 -29 -32 -53 -62
    -53 -68 0 -6 -17 -29 -38 -53 -21 -23 -60 -78 -87 -122 -27 -44 -61 -94 -77
    -110 -15 -17 -28 -39 -28 -48 0 -9 -9 -22 -21 -29 -22 -14 -69 -97 -69 -122 0
    -9 -13 -44 -29 -78 -35 -77 -50 -119 -63 -178 -5 -25 -13 -54 -18 -65 -10 -22
    -13 -36 -36 -150 -9 -44 -27 -111 -41 -150 -23 -65 -33 -126 -63 -390 -6 -55
    -18 -141 -27 -192 -10 -59 -14 -120 -10 -171 3 -44 1 -84 -3 -89 -5 -4 -20
    -41 -33 -81 -14 -40 -27 -76 -31 -79 -3 -4 -6 -13 -6 -21 0 -9 -6 -23 -14 -31
    -13 -15 -23 -50 -45 -166 -4 -22 -12 -49 -18 -60 -6 -11 -14 -45 -18 -75 -4
    -30 -13 -64 -19 -75 -7 -11 -19 -58 -26 -105 -7 -47 -21 -119 -32 -160 -11
    -41 -26 -133 -34 -203 -8 -71 -16 -133 -19 -138 -3 -5 -13 -59 -21 -121 -8
    -62 -19 -142 -23 -178 -5 -36 -18 -103 -29 -150 -12 -47 -26 -119 -32 -160 -6
    -41 -20 -131 -32 -200 -11 -69 -24 -177 -29 -240 -5 -63 -14 -128 -19 -144 -6
    -16 -10 -113 -11 -215 -1 -239 -26 -520 -50 -576 -5 -11 -13 -56 -18 -100 -12
    -94 -27 -178 -46 -255 -8 -30 -16 -73 -19 -95 -6 -39 -15 -82 -35 -160 -6 -22
    -11 -55 -11 -74 0 -18 -16 -98 -35 -177 -19 -78 -35 -165 -35 -193 0 -27 -4
    -51 -10 -53 -13 -4 -30 -82 -44 -213 -7 -60 -17 -123 -24 -138 -7 -16 -12 -43
    -12 -62 0 -19 -4 -36 -9 -39 -4 -3 -11 -24 -15 -46 -3 -23 -10 -49 -15 -58
    -17 -33 -40 -107 -47 -152 -4 -25 -10 -50 -15 -55 -4 -6 -18 -37 -30 -70 -12
    -33 -33 -70 -46 -82 -12 -12 -23 -33 -23 -47 0 -17 -18 -40 -62 -80 l-63 -56
    6578 0 6577 0 0 25 c0 14 -29 284 -65 602 l-65 577 -96 164 c-56 95 -106 168
    -118 173 -12 5 -147 53 -301 107 l-280 98 -82 419 -83 420 -135 202 -135 203
    200 282 c110 154 200 286 200 292 0 6 -62 196 -139 421 l-138 410 -91 62 -90
    63 -219 16 -218 15 -197 121 -198 121 0 46 c0 138 6 126 -214 403 l-202 254
    -44 397 -44 398 -174 158 -174 158 -177 7 c-218 8 -547 23 -707 32 l-121 6
    -74 149 -74 150 -65 19 c-36 10 -333 98 -660 195 l-595 176 -210 119 -211 120
    -82 0 c-78 0 -89 -3 -314 -90 l-232 -90 -186 46 c-102 25 -294 72 -427 105
    l-242 59 -181 0 c-178 0 -184 -1 -382 -45 -198 -44 -202 -45 -222 -26 -12 10
    -131 116 -266 236 -135 120 -321 290 -415 379 l-170 162 -395 36 -395 37 -152
    158 -152 157 6 137 c5 110 0 201 -22 448 -16 171 -32 311 -35 311 -4 0 -21
    -87 -39 -192z"/>
  </clipPath>
  <clipPath id="clip-path-klargs-cave">
    <path transform="matrix(0.1,0,0,-0.1,0,0)"
    d="M29406 -14041 c-242 -21 -443 -42 -447 -46 -3 -5 -75 -163 -159 -353
    -84 -190 -157 -351 -163 -358 -5 -6 -111 -91 -234 -188 l-224 -176 6 -61 c3
    -34 12 -147 21 -251 l15 -189 120 -228 119 -228 -190 -350 -190 -350 0 -626 0
    -626 21 3 c18 3 42 -37 181 -297 88 -165 165 -309 173 -320 7 -12 112 -95 234
    -184 122 -90 224 -167 226 -171 2 -4 -23 -163 -56 -353 l-59 -347 250 -390
    250 -390 59 -356 c33 -196 62 -359 65 -361 3 -3 296 -95 652 -205 l646 -199
    198 -179 198 -179 508 -21 c279 -11 510 -22 512 -25 3 -2 129 -459 282 -1015
    153 -557 282 -1015 286 -1019 5 -5 141 -65 302 -134 l292 -127 240 -180 240
    -180 342 30 341 30 459 -120 459 -120 430 230 429 230 131 0 130 0 450 -170
    449 -170 423 65 c232 36 435 68 450 72 16 5 81 61 155 135 l127 127 279 40
    c172 24 284 45 291 53 7 7 149 213 314 458 l302 445 230 225 230 225 -11 340
    c-9 274 -20 437 -61 840 l-50 500 -170 171 -170 170 11 228 11 228 220 299
    219 299 0 420 0 419 -60 131 -60 131 0 409 0 410 -151 237 c-83 131 -159 245
    -168 255 -9 9 -104 53 -211 99 -107 45 -199 85 -203 89 -5 4 -27 79 -48 166
    -22 88 -44 176 -50 197 l-10 37 -382 -2 -381 -3 -277 -355 c-250 -322 -291
    -369 -437 -508 l-160 -153 -134 86 c-73 47 -136 89 -140 93 -4 4 -21 182 -38
    396 l-30 388 -89 128 -90 128 -30 168 c-16 92 -36 173 -43 179 -7 7 -246 162
    -530 344 l-517 331 -1501 0 -1501 0 -430 -40 -430 -41 -389 -219 -390 -220
    -270 241 c-148 132 -270 246 -270 252 0 7 -9 194 -20 417 -11 223 -20 411 -20
    417 0 7 -108 94 -239 192 l-239 180 -179 218 c-156 190 -183 218 -208 220 -17
    0 -228 -16 -469 -38z"/>
  </clipPath>
  <clipPath id="clip-path-legend">
    <path transform="matrix(0.1,0,0,-0.1,0,0)"
    d="M2240 -22685 l0 -5445 3080 0 3080 0 0 5445 0 5445 -3080 0 -3080 0 0
    -5445z"/>
  </clipPath>
  <clipPath id="clip-path-overpass">
    <path transform="matrix(0.1,0,0,-0.1,0,0)"
    d="M21910 -5699 c-22 -33 -40 -63 -40 -67 0 -15 -197 -201 -232 -219
    -21 -11 -38 -23 -38 -27 0 -5 -5 -8 -11 -8 -13 0 -99 -68 -117 -93 -7 -9 -28
    -23 -45 -31 -18 -7 -55 -37 -83 -65 -29 -28 -57 -51 -63 -51 -6 0 -28 -15 -48
    -32 -21 -18 -47 -38 -57 -44 -11 -6 -24 -19 -30 -29 -16 -28 -29 -44 -51 -66
    -39 -39 -52 -49 -60 -49 -5 0 -30 -21 -56 -46 -36 -35 -45 -51 -41 -70 2 -13
    9 -24 14 -24 5 0 543 -471 1196 -1047 653 -577 1198 -1058 1212 -1070 l25 -22
    -92 -185 c-51 -103 -93 -188 -93 -191 0 -3 36 -5 79 -5 51 0 81 -4 83 -11 3
    -8 29 -4 84 15 l79 26 465 465 c256 256 467 468 469 470 3 4 -2497 2535 -2504
    2535 -3 0 -22 -27 -45 -59z"/>
  </clipPath>
  <clipPath id="clip-path-path-to-den">
    <path transform="matrix(0.1,0,0,-0.1,0,0)"
    d="M16843 -1856 l-132 -64 -144 37 -143 37 -255 -73 c-140 -41 -268 -78
    -284 -82 -26 -7 -43 -30 -113 -152 l-82 -143 -187 -29 -187 -29 -161 83 -160
    82 -225 20 c-328 28 -284 38 -386 -88 -47 -60 -94 -111 -103 -114 -9 -3 -272
    -62 -585 -130 l-569 -123 -129 -142 c-70 -77 -205 -235 -299 -350 -158 -194
    -170 -211 -167 -244 3 -19 15 -96 28 -170 l23 -135 -59 -185 -59 -184 -115
    -49 c-63 -27 -239 -105 -390 -173 -248 -112 -292 -135 -440 -237 l-165 -112
    -136 -225 -135 -225 -120 -76 -119 -75 -98 -255 -97 -254 20 -204 c11 -112 20
    -219 20 -237 0 -23 -28 -85 -89 -196 l-88 -163 -29 -178 -28 -177 -81 -24
    c-44 -14 -143 -43 -220 -66 -107 -32 -147 -49 -170 -71 l-30 -29 1312 0 1311
    0 31 49 c26 40 62 69 214 170 l182 121 59 242 c52 219 63 253 112 346 50 95
    56 114 84 270 l31 167 252 252 252 252 191 16 192 16 125 66 c90 48 129 74
    137 92 6 14 64 126 128 248 l116 222 275 130 276 130 476 125 c425 113 484
    126 558 126 l82 0 217 -157 216 -157 240 -73 c220 -68 266 -78 525 -119 156
    -24 298 -44 314 -44 16 0 145 23 286 50 l257 50 169 -74 c139 -60 188 -77 269
    -90 54 -8 100 -17 101 -18 1 -2 22 -110 46 -240 l43 -238 325 -252 c179 -139
    331 -258 338 -263 11 -8 8 -47 -17 -218 l-30 -208 31 -123 31 -122 111 -19
    112 -19 65 -65 c36 -36 115 -119 175 -184 l110 -118 153 -24 c84 -14 161 -25
    172 -25 11 0 90 34 176 75 144 69 155 76 152 99 -2 19 8 37 42 71 24 25 48 45
    54 45 19 0 85 68 112 115 6 10 19 23 30 29 10 6 36 26 57 44 20 17 42 32 48
    32 6 0 34 23 63 51 28 28 65 58 83 65 17 8 38 22 45 31 18 25 104 93 117 93 6
    0 11 3 11 8 0 4 17 16 38 27 59 31 119 97 280 313 l152 202 128 1 c70 1 167 4
    216 8 l88 6 55 153 c31 86 51 157 47 162 -5 5 -335 182 -734 393 l-725 384
    -235 58 c-129 32 -236 59 -238 60 -2 2 -33 119 -69 261 l-66 259 -95 133 c-52
    73 -98 135 -103 138 -5 3 -71 12 -146 20 -107 12 -209 33 -452 97 l-314 81
    -96 121 c-54 66 -166 221 -249 346 l-153 225 -286 68 -286 67 -180 92 -180 92
    -29 81 -29 82 -182 120 -182 120 -265 26 c-146 14 -281 26 -300 25 -21 0 -88
    -26 -167 -65z"/>
  </clipPath>
  <clipPath id="clip-path-steep-passage-1">
    <path transform="matrix(0.1,0,0,-0.1,0,0)"
    d="M20781 -6697 c-92 -44 -150 -78 -143 -82 9 -5 -3 -30 -38 -79 l-51
    -72 -167 -84 -167 -85 -200 -246 -200 -245 -72 -243 c-40 -133 -77 -258 -83
    -278 l-10 -35 -261 -44 -261 -44 -327 -245 c-179 -136 -362 -275 -406 -309
    l-80 -64 -52 -235 c-28 -129 -53 -236 -55 -238 -1 -1 -73 31 -158 72 l-156 74
    -59 112 -60 112 -225 91 -225 90 -125 198 c-69 109 -132 201 -140 206 -8 4
    -164 53 -347 109 l-331 101 -98 -37 -97 -37 -106 28 c-58 16 -134 36 -168 44
    l-61 15 -193 -89 -192 -89 -174 90 -174 90 -89 165 -89 165 -254 68 -255 67
    -103 -39 -104 -39 -3 -1206 -2 -1206 120 0 121 0 203 105 203 105 321 0 321 0
    5 -32 c3 -18 11 -62 17 -98 8 -49 31 -105 92 -222 l82 -158 265 -173 265 -174
    252 -44 253 -43 60 -83 60 -82 -45 -121 -44 -120 -31 -347 c-26 -296 -40 -400
    -95 -712 -36 -201 -65 -374 -65 -383 0 -17 83 -18 1784 -18 1691 0 1785 1
    1790 18 3 9 32 107 65 218 l61 201 -6 159 -6 159 59 150 59 150 289 186 290
    186 70 114 71 114 285 240 285 241 186 66 186 67 225 157 226 158 87 180 c75
    154 94 204 129 338 l40 158 150 180 149 180 42 0 c98 0 91 -7 195 202 l94 190
    -25 21 c-14 12 -559 493 -1212 1070 -653 576 -1193 1047 -1200 1046 -7 0 -82
    -35 -167 -76z"/>
  </clipPath>
  <clipPath id="clip-path-steep-passage-2">
    <path transform="matrix(0.1,0,0,-0.1,0,0)"
    d="M26743 -3653 l-461 -112 -114 -76 -115 -76 -291 -6 -291 -7 -196 75
    -195 75 -163 -97 -162 -97 -370 -45 -370 -46 -96 -333 c-53 -183 -99 -336
    -102 -339 -3 -3 -206 -52 -451 -109 l-446 -104 -154 -100 -154 -101 -26 -72
    c-15 -40 -39 -108 -55 -152 l-29 -80 -88 -6 c-49 -4 -146 -7 -216 -8 l-128 -1
    -118 -157 c-65 -87 -127 -171 -137 -188 -18 -30 -18 -30 18 5 20 19 37 39 37
    43 0 4 19 35 41 69 l42 61 421 -424 c232 -233 796 -802 1252 -1264 l831 -839
    127 79 c100 63 121 81 102 83 -20 3 -24 10 -30 55 -3 29 -6 75 -6 104 0 50 -2
    53 -55 100 l-54 49 43 55 c24 31 79 105 121 165 43 60 81 112 84 116 4 4 247
    66 541 138 482 117 875 216 907 227 6 3 66 -63 132 -146 67 -83 123 -151 125
    -151 2 0 111 -11 242 -25 149 -16 298 -25 397 -25 l159 0 147 100 146 100 183
    0 c116 0 182 -4 182 -10 0 -6 49 15 110 45 l110 55 860 0 c473 0 860 4 860 8
    0 5 -6 29 -14 55 -10 33 -46 83 -136 189 l-122 143 116 3 116 3 0 1188 0 1188
    -224 82 -225 81 -633 80 c-348 44 -696 88 -773 98 l-140 18 -308 183 c-169
    101 -315 184 -325 186 -9 2 -225 -47 -479 -108z"/>
  </clipPath>
  <clipPath id="clip-path-top-of-escarpment">
    <path transform="matrix(0.1,0,0,-0.1,0,0)"
    d="M9980 -8370 c0 -1181 2 -1310 16 -1310 8 0 81 5 162 11 l147 10 142
    81 142 82 207 288 c114 159 210 291 214 293 14 9 324 35 331 27 3 -4 35 -78
    70 -164 l63 -158 256 -131 c140 -72 260 -136 265 -143 6 -7 32 -110 60 -229
    l49 -216 126 -52 c113 -46 137 -61 247 -150 l122 -98 336 -36 c185 -19 350
    -35 367 -35 16 0 98 29 181 65 l151 65 293 0 293 0 0 1205 0 1204 -62 -24
    c-35 -13 -128 -47 -207 -77 l-144 -53 -64 -78 c-36 -42 -75 -79 -86 -82 -119
    -28 -442 -83 -446 -77 -3 5 -54 83 -113 173 l-108 164 -179 134 c-165 124
    -188 145 -286 263 l-106 129 76 108 c41 60 75 112 75 115 0 3 -583 6 -1295 6
    l-1295 0 0 -1310z"/>
  </clipPath>
  <clipPath id="clip-path-goblin-den">
    <path transform="matrix(0.1,0,0,-0.1,0,0)"
    d="M6680 -4990 l-275 -5 -185 -107 -184 -108 -98 0 -98 0 -265 -140
    -264 -140 -140 35 c-77 19 -148 35 -158 35 -11 0 -109 -29 -219 -65 l-200 -64
    -174 -8 -175 -8 -165 -232 -165 -233 -79 -202 c-50 -129 -88 -213 -105 -230
    -14 -15 -120 -106 -236 -202 l-210 -176 -111 -237 -110 -238 -253 -170 -252
    -170 -162 -170 -163 -170 -22 -360 -22 -360 24 -275 23 -275 96 -317 c86 -282
    97 -326 97 -394 l0 -76 -100 -106 -100 -107 0 -216 0 -216 74 -204 c41 -112
    123 -308 184 -436 l110 -232 127 -148 c71 -81 134 -155 142 -164 12 -14 11
    -40 -2 -173 -14 -143 -14 -181 0 -421 l16 -264 83 -209 83 -209 197 -227 c108
    -124 205 -230 214 -234 9 -5 140 -38 289 -73 l273 -63 180 -256 180 -255 207
    -53 c141 -36 323 -72 566 -112 198 -32 361 -60 363 -63 2 -2 14 -72 26 -155
    l21 -150 115 -116 115 -116 351 -115 351 -115 163 0 162 0 121 106 122 107
    421 106 421 106 74 118 74 117 46 -1 c25 0 100 -6 166 -12 l119 -12 76 -195
    75 -194 400 -357 c226 -202 409 -358 420 -359 11 0 108 12 217 27 l196 27 154
    -75 153 -75 570 -33 c314 -17 602 -34 640 -37 l70 -6 74 106 c73 104 75 105
    125 116 28 5 325 66 661 135 l610 125 137 142 c133 139 141 149 254 343 64
    110 117 201 118 203 2 1 185 53 408 115 l405 113 111 104 111 104 96 241 c55
    140 95 256 95 276 0 19 -16 194 -35 389 l-35 354 -173 331 -172 330 -165 87
    c-91 48 -170 87 -176 88 -6 0 -70 -43 -143 -95 l-131 -95 -293 38 -292 37 -81
    155 -81 155 -526 423 -527 422 -195 -35 c-107 -19 -202 -35 -212 -35 -11 0
    -69 57 -143 140 -68 77 -125 140 -127 140 -71 0 -691 64 -702 73 -92 67 -152
    124 -159 151 -5 17 -22 82 -37 143 l-29 113 -163 132 -163 133 0 130 c0 72 3
    187 7 256 l6 127 83 7 84 7 0 1309 c0 1054 -2 1309 -13 1309 -7 0 -41 -34 -76
    -75 -104 -121 -82 -117 -219 -41 l-119 66 -374 53 -374 52 -103 265 c-97 248
    -111 292 -210 682 l-107 417 -103 119 c-83 96 -110 121 -135 125 -18 2 -173
    20 -346 38 l-315 33 -128 173 -129 173 -137 -2 c-75 -1 -261 -5 -412 -8z"/>
  </clipPath>
  <clipPath id="clip-path-twin-pools-cave">
    <path transform="matrix(0.1,0,0,-0.1,0,0)"
    d="M34165 -4066 c-434 -6 -844 -12 -910 -13 l-120 -1 -172 -217 c-162
    -205 -185 -229 -383 -406 l-210 -187 7 -160 6 -160 -474 0 -474 1 -170 -88
    -171 -87 -154 44 c-85 24 -158 48 -161 52 -3 5 -30 73 -59 151 -29 78 -58 148
    -64 155 -5 8 -155 133 -333 278 -276 227 -330 275 -374 337 -27 40 -61 78 -75
    85 l-24 13 0 -1191 c0 -952 3 -1190 13 -1190 7 0 80 -68 162 -150 125 -125
    169 -163 264 -222 112 -70 118 -72 225 -90 61 -10 122 -21 135 -24 23 -5 17
    -13 -76 -107 -65 -65 -124 -138 -165 -203 l-65 -100 -152 -44 c-83 -23 -154
    -40 -158 -37 -3 4 -30 111 -59 239 -29 128 -59 256 -67 283 l-13 50 -862 3
    -862 2 -109 -55 -109 -54 39 -103 c33 -85 52 -164 103 -443 l63 -340 117 -190
    c134 -216 130 -184 36 -300 -32 -38 -93 -126 -137 -195 l-80 -125 -27 -290
    c-26 -273 -30 -297 -67 -410 l-39 -120 50 -164 c28 -91 50 -167 50 -170 0 -3
    -43 41 -96 97 l-97 103 -166 83 -166 83 -195 37 -195 37 -155 -21 c-85 -11
    -166 -20 -180 -20 -19 0 -122 81 -390 305 l-365 305 -52 171 c-29 94 -58 179
    -66 188 -7 9 -59 71 -115 137 l-101 122 -230 141 -231 141 -257 45 c-141 25
    -266 46 -277 47 -22 2 -242 -133 -264 -161 -7 -9 -220 -224 -475 -478 l-462
    -463 -77 -26 c-43 -14 -78 -28 -78 -32 0 -3 59 -159 131 -346 l131 -341 111
    -109 112 -108 240 -120 240 -120 85 -88 85 -89 407 -125 407 -125 675 -533
    676 -532 262 -83 262 -82 180 -180 181 -180 412 -91 413 -90 143 90 143 90 97
    143 97 142 276 104 276 105 132 -13 c72 -7 134 -15 137 -17 3 -2 9 -100 12
    -219 l7 -215 277 -367 278 -367 145 -58 c79 -32 153 -58 165 -58 11 0 162 25
    335 55 173 30 326 55 339 55 24 0 1002 -292 1030 -308 25 -14 170 -448 226
    -676 42 -172 58 -223 74 -235 12 -9 90 -58 175 -109 l154 -93 261 -75 262 -74
    70 21 c40 12 74 18 79 13 18 -19 150 -318 143 -324 -5 -4 -104 -74 -222 -156
    -117 -82 -217 -158 -222 -169 -8 -18 -99 -377 -99 -390 0 -3 628 -5 1396 -5
    l1395 0 78 -50 c60 -38 87 -50 118 -50 25 0 101 24 209 66 140 55 210 90 408
    207 140 83 242 150 247 162 4 11 38 153 74 315 37 162 69 303 71 312 3 9 39
    38 80 63 l75 45 92 -53 92 -54 388 -22 389 -21 120 -50 c143 -59 118 -58 528
    -30 l295 20 115 70 c63 39 212 130 330 203 l215 132 126 178 126 178 6 211 c4
    116 7 302 7 414 l0 202 -65 166 -65 167 65 201 c36 111 65 213 65 227 0 14
    -31 235 -70 493 -38 258 -70 479 -70 491 0 13 35 62 89 122 l88 100 282 67
    c156 37 284 68 286 70 1 2 41 74 89 161 l86 157 0 313 c0 173 -3 456 -7 630
    l-6 315 -253 208 c-139 114 -258 219 -264 233 -7 14 -66 150 -132 301 -66 151
    -125 280 -132 286 -6 6 -176 77 -379 158 l-367 146 -202 -45 c-111 -25 -205
    -42 -209 -38 -3 5 -88 113 -188 240 l-181 233 7 234 6 234 -102 184 c-57 100
    -104 184 -105 185 -2 3 -239 26 -716 73 l-215 21 -210 97 -210 98 -75 329 -75
    330 -277 232 -276 233 -299 81 c-164 45 -299 83 -300 84 -1 0 -9 147 -18 326
    -9 192 -24 390 -37 487 l-22 162 -188 165 -187 165 -178 -2 c-98 0 -533 -7
    -968 -14z"/>
  </clipPath>
</g>
EOF

group = Nokogiri::XML(file)

map_width = 4275.0
map_height = 2979.0
translate_y = 0 # map_height

group.xpath('//path').each do |path|
  next unless path['transform']

  pathdef = path['d']

  origin = pathdef.match(/M(-?\d+)\s+(-?\d+)/)
  origin_x = origin[1].to_f * 0.1 / map_width
  origin_y = (origin[2].to_f - translate_y * 10) * -0.1 / map_height

  new_origin = "M#{origin_x} #{origin_y}"

  rest = pathdef[origin[0].length..-1]

  rest.gsub!(/(-?\d+\.?\d*?)\s+(-?\d+\.?\d*)/) do |m|
    x = $1
    y = $2

    "#{"%1.8f" % (x.to_f * 0.1 / map_width)} #{"%1.8f" % (y.to_f * -0.1 / map_height)}"
  end

  path['d'] = "#{new_origin} #{rest}"
  path.search('.//@transform').remove
end

puts group
